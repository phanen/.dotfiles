#!/usr/bin/env sxhkd
# /usr/share/doc/bspwm/examples/sxhkdrc
# don't use xdotool, maybe collide with kmonad

# control
super + z
	pkill -USR1 -x sxhkd ; bspc wm -r; pkill polybar; polybar -r;
# super + Shift + z
super + q
	bspc node -c
super + ctrl + q
	bspc quit

# navigate
super + {j, k}
	bspc node -f {next, prev}.local.!hidden.window
super + {f, e}
	bspc desktop -f {next, prev}
	# bspc desktop -f {next, prev}.local
super + r
	bspc desktop -f last
super + {o, i}
	bspc wm -h off; \
	bspc node -f {older, newer}; \
	bspc wm -h on

# move
super + Return
	(bspc node -f biggest.window.local && \
		bspc node -f last.window.local && \
		bspc node -s biggest.window.local) || \
	(bspc node -f last.window.local && bspc node -s biggest.window.local)
super + ctrl + {j, k}
	bspc node -d {next, prev} --follow
super + ctrl + shift + {j, k}
	bspc node -d {next, prev}
super + shift + {j, k}
	bspc desktop -s {next, prev} -f; bspc monitor -d 0 1 2
# super + alt + {p, b, w, e}
# 	bspc node -f @{parent, brother, first, second}

super + {1-2, 0}
	bspc desktop -f '^{1-3}'
super + shift + {1-2, 0}
	bspc node -d '^{1-3}' --follow
super + ctrl + {1-2, 0}
	bspc node -d '^{1-3}'

# status switch
super + m
	bspc desktop -l next
super + shift + f
	bspc node -t \~floating
super + y
	bspc node -t \~pseudo_tiled
super + shift + y
	bspc node -t \~tiled
# hide
# super + {_, alt + } v
# 	bspc node {-g hidden, ${bspc query -N -n .hidden | tail -n1} -g hidden=off}
# super + d
	# sh $XDG_CONFIG_HOME/sxhkd/scripts/toggle-hidden.sh

# resize
super + ctrl + {h, l}
	bspc node -z {left -20 0 || bspc node -z right -20 0, \
				right 20 0 || bspc node -z left 20 0}

super + shift + {m, comma, period, slash}
		bspc node -z {left -20 0 || bspc node -z right -20 0, \
					bottom 0 20 || bspc node -z top 0 20, \
				top 0 -20 || bspc node -z bottom 0 -20, \
				right 20 0 || bspc node -z left 20 0}
super + shift + {u, i, o, p}
	bspc node -z {right -20 0 || bspc node -z left -20 0, \
				top 0 20 || bspc node -z bottom 0 20, \
				bottom 0 -20 || bspc node -z top 0 -20, \
				left 20 0 || bspc node -z right 20 0}

# launch
super + n
	wezterm
	# kitty
	# alacritty --working-directory ~
super + c
	alacritty --working-directory ~
super + semicolon
	rofi -show drun -matching fuzzy
super + p
	CM_LAUNCHER=rofi clipmenu
# TODO: need a santinizer
super + s
	xsel -b | sh $XDG_CONFIG_HOME/sxhkd/scripts/url-santinizer.sh >> $XDG_CONFIG_HOME/newsboat/urls
super + Tab
	darkman toggle
super + ctrl + t
	sh $XDG_CONFIG_HOME/sxhkd/scripts/toggle-polybar.sh

# FIXME: this is just workaround for wezterm builtin lua config
# super key not work well with wezterm builtin config
super + u
	wezterm cli spawn
super + l
	wezterm cli activate-tab --tab-relative +1
super + h
	wezterm cli activate-tab --tab-relative -1


# proxy via kmonad
super + {F1, F2}
	sound-control {down, up}
super + {F3, F4}
	light-control {down, up}
super + {F5, F6, F7, F8}
	xrandr -o {left, right, normal, inverted}
super + F9
	flameshot gui
super + shift + bracketleft
	flameshot gui -r | imgur.sh
super + bracketright
	slip --stop || slip --gif
super + F11
	~/.bin/toggle-touchpad.sh
