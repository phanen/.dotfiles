alias v='nvim'
alias k='pkill'
alias t="type -a"
alias y="paru"
alias s="systemctl"
alias vj="NVIM_APPNAME=nvim-test nvim"
alias ls="eza --color=auto --hyperlink"
alias la="eza -a"
alias l="eza -la"
alias lt="eza --tree"
alias df="df -h"
alias which="which -a"
alias cs="cd $XDG_STATE_HOME/nvim/swap/"
alias rs="exec $SHELL"
alias tl='tldr'
alias mx='chmod +x'
alias rx='chmod -x'
alias vn='nvim -u NONE'
alias du="dust"
alias em="emacs -nw"
alias lg="lazygit"

alias pi='sudo pacman -S'
alias pd='sudo pacman -Rns'
alias pao='pacman -Qo'
alias pfo='pacman -F'
alias pai='pacman -Qi'
alias psi='pacman -Si'
alias pal='pacman -Ql'
alias pfl='pacman -Fl'
alias pas='pacman -Qs'
alias pss='pacman -Ss'
alias yss='paru -Ss'
alias ysi='paru -Si'
alias yi='paru -S'
alias pat='pactree -lu'
alias par='pactree -r -lu'
alias pst='pactree -slu'
alias psr='pactree -r -slu'

alias vw='which.sh $VISUAL'
alias lw='which.sh exa\ -la'
alias ldw='which.sh ldd'

alias tp="unset http_proxy https_proxy all_proxy;"
alias zz="mkdir -p /tmp/tmp; cd /tmp/tmp; paru -G"

alias rb="extra-riscv64-build -- -d $HOME/pkg/:/var/cache/pacman/pkg"
alias rvp="git diff --no-prefix --relative | tail -n +3  > riscv64.patch"
alias rve="sudo systemd-nspawn -D ~/plct/archriscv/ --machine archriscv -a -U"

add-key() {
  . ./PKGBUILD
  for key in "${validpgpkeys[@]}"; do
    echo "Receiving key ${key}..."
    gpg --keyserver hkps://keyserver.ubuntu.com --recv-keys "$key" || true
    gpg --keyserver hkps://keys.openpgp.org --recv-keys "$key" || true
  done
}

gib() {
  cd ~/src || return 1
  [[ -z $1 ]] && return 1
  if [[ -d $1 ]]; then
    fname=$1
    cd $fname
  else
    paru -G $1 || return 1
    fname=$1
    cd $fname
    # add-key
  fi
  . ./PKGBUILD
  echo arch="(${arch[@]})"
  for s in "${source[@]}"; do
    echo $s
  done
  for s in "${_commit[@]}"; do echo $s
  done
  cp ~/archriscv-packages/$fname/*.patch .
  return 0
}

pie() {
  cd ~/archriscv-packages || return
  [[ -z $1 ]] && return

  # update patch
  fname=$1
  cd ~/src/$fname || return
  git diff --no-prefix --relative | tail -n +3  > riscv64.patch
  cat riscv64.patch
  . ./PKGBUILD
  echo -n "${fname} ${pkgver}-${pkgrel}" | xsel -ib

  # prepare for commit
  cd ~/archriscv-packages || return
  git checkout master
  git pull --ff-only upstream master:master
  git push
  git checkout -b $fname || git checkout $fname
  git rebase master
  mkdir -p $fname && cd $fname
  cp ~/src/$fname/*.patch .
  test -s riscv64.patch || rm *.patch
}

# vim:foldmethod=marker
# vim:ft=sh

